<!DOCTYPE html>
<html>
  <head>
    <title>Circle Calendar</title>
    <style>
      body, html {
        margin: 0;
        min-height: 100%;
        padding: 0;
      }

      #svg {
        max-width: 600px;
      }
    </style>
    <script src="snap.svg-min.js"></script>
  <head>
  <body>

    <div>
      <svg id="svg" viewbox="0 0 600 600" style="background: #336699;"></svg>
    </div>

    <script type="text/javascript">


      /**
       * Functions
       */

      function getDaysInMonth(m, y) {
        return /8|3|5|10/.test(--m)?30:m==1?(!(y%4)&&y%100)||!(y%400)?29:28:31;
      }

      function createTextNodes (numNodes, radius, top, left) {
        var nodes = [];
        var width = (radius * 2);
        var angle, x, y, i;
        for (i = 0; i < numNodes; i++) {
          angle = (i / (numNodes / 2)) * Math.PI;
          x = ((radius * Math.cos(angle)) + (width / 2)) + left;
          y = ((radius * Math.sin(angle)) + (width / 2) + 15) + top;

          nodes.push({
            x: x,
            y: y
          });
        }

        return nodes;
      }

      function createLineNodes (numNodes, skip, end, radius, top, left) {
        var line = [];
        var width = (radius * 2);
        var angle, x, y, i;
        for (i = 0; i < numNodes; i++) {
          angle = (i / (numNodes / 2)) * Math.PI;
          x = ((radius * Math.cos(angle)) + (width / 2)) + left;
          y = ((radius * Math.sin(angle)) + (width / 2) + 15) + top;

          if (i > skip && i < end) {
            line.push({
              x: x,
              y: y
            });
          }
        }

        return line;
      }

      function animatePath (path, time) {
        var length = path.getTotalLength();
        path.style.transition = path.style.WebkitTransition = 'none';
        path.style.strokeDasharray = length + ' ' + length;
        path.style.strokeDashoffset = length;

        path.getBoundingClientRect();

        path.style.transition = path.style.WebkitTransition = 'stroke-dashoffset ' + time + 's ease-in-out';
        path.style.strokeDashoffset = '0';
      }

      /**
       * End of functions
       */

      var weekDays = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];
      var snap = Snap('#svg');

      // Create the background and circle
      var imageBackground = snap.image('image.png', 0, 0, 600, 600);
      var calendarCircle = snap.circle(300, 300, 200).attr({
        fill: '#FFFFFF'
      });

      // Mask background
      imageBackground.attr({
        mask: calendarCircle
      });

      // Some date assigning
      var date = new Date();
      var numDatesThisMonth = getDaysInMonth(date.getMonth() + 1, date.getFullYear());

      // Create some nodes
      var numberCircleNodes = createTextNodes(numDatesThisMonth, 200, 100, 100);
      var dayCircleNodes = createTextNodes(numDatesThisMonth, 200, 0, 50);
      var eventOne = createLineNodes(numDatesThisMonth, 5, 10, 230, 120);

      var weekDay = null;
      var item = null;

      //for (var i = 0; i < numDatesThisMonth; i++) {
      //  weekDay = new Date(date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + (i+1));
      //  weekDay = weekDay.getDay();
      //  item = snap.text(numberCircleNodes[i].x, numberCircleNodes[i].y, (i + 1)).attr({
      //    'font-size': 14,
      //    'fill': '#000000'
      //  });
      //  item.attr({
      //    dx: '-' + (item.node.clientWidth / 2),
      //    dy: '-' + (item.node.clientHeight / 2)
      //  });
      //  item = snap.text(dayCircleNodes[i].x, dayCircleNodes[i].y, weekDays[weekDay]).attr({
      //    'font-size': 14,
      //    'fill': '#000000'
      //  });
      //  weekDay = null;
      //}
      //for (var i = 0; i < eventOne.length; i++) {
      //  snap.text(eventOne[i].x, eventOne[i].y, weekDays[i]).attr({
      //    'font-size': 14,
      //    'fill': '#000000'
      //  });
      //}

      var simplePath = snap.path("M0 0S50 25 100 100").attr({
        stroke: 'red',
        'stroke-width': 2,
        fill: 'transparent'
      });

      console.log(simplePath.node);
      var path = simplePath.node;

      animatePath(path, 3);

    </script>

  </body>
</html>
